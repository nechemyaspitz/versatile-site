!function(){"use strict";const e='[data-navigation] a[href]:not([target="_blank"]):not([data-no-barba])';function t(){return document.querySelector("[data-navigation-status]")}function i(e=!1){const i=t();i&&i.setAttribute("data-navigation-status","not-active")}function o(){const e=t();if(!e)return;const i="active"===e.getAttribute("data-navigation-status");e.setAttribute("data-navigation-status",i?"not-active":"active")}function r(t=location.pathname){let i=document.querySelectorAll(e);0===i.length&&(i=document.querySelectorAll('.hamburger-nav a[href]:not([target="_blank"])')),0===i.length&&(i=document.querySelectorAll('nav a[href]:not([target="_blank"]):not([data-taxi-ignore])')),i.forEach(e=>{const i=e.getAttribute("href")||"";try{const o=new URL(i,location.origin).pathname===t;e.classList.toggle("w--current",o),o?e.setAttribute("aria-current","page"):e.removeAttribute("aria-current")}catch(e){}})}function s(){s._ac?.abort?.();const t=new AbortController;s._ac=t,document.querySelectorAll('[data-navigation-toggle="toggle"]').forEach(e=>{e.addEventListener("click",o,{signal:t.signal})}),document.querySelectorAll('[data-navigation-toggle="close"]').forEach(e=>{e.addEventListener("click",i,{signal:t.signal})}),document.addEventListener("keydown",e=>{"Escape"===e.key&&i()},{signal:t.signal}),document.querySelectorAll(e).forEach(e=>{e.addEventListener("click",()=>i(!0),{signal:t.signal})})}function n(){return window.taxi?class extends window.taxi.Renderer{initialLoad(){this.onEnter(),this.onEnterCompleted()}onEnter(){}onEnterCompleted(){}onLeave(){}onLeaveCompleted(){}}:(console.error("taxi not loaded!"),class{})}const a=new Set,c=(e,t={})=>a.has(e)?Promise.resolve():new Promise((i,o)=>{const r=document.createElement("script");r.src=e,r.async=!0,Object.entries(t).forEach(([e,t])=>r.setAttribute(e,t)),r.onload=()=>{a.add(e),i()},r.onerror=o,document.head.appendChild(r)}),l=e=>a.has(e)?Promise.resolve():new Promise((t,i)=>{const o=document.createElement("link");o.rel="stylesheet",o.href=e,o.onload=()=>{a.add(e),t()},o.onerror=i,document.head.appendChild(o)}),d=new Map,u=(e,t)=>d.set(e,t),h=e=>d.get(e)||{};function p(){const e=(new Date).getFullYear();document.querySelectorAll("[data-current-year]").forEach(t=>{t.textContent=e})}async function m(e){document.fonts&&document.fonts.ready&&await document.fonts.ready,p(),await l("https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.css"),window.Swiper||await c("https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.js");const t=document.querySelector(".swiper");if(!t)return void u("home",{destroy:()=>{}});const i=window.matchMedia("(prefers-reduced-motion: reduce)").matches,o=i?0:1.45;let r=null,s=null,n=null,a=0,d=null;if(window.gsap&&gsap.registerPlugin)try{window.SplitText&&gsap.registerPlugin(SplitText),window.ScrollTrigger&&gsap.registerPlugin(ScrollTrigger)}catch(e){}let h=[];function m(e){if(!e||!window.SplitText)return null;if(e.__split)return e.__split;const t=e.querySelector(".slider-product-name");if(!t)return null;const i=new SplitText(t,{type:"chars"});return e.__split=i,gsap.set(i.chars,{yPercent:120,rotate:6,opacity:0,transformOrigin:"0% 100%",willChange:"transform, opacity"}),i}function g(e,t){const i=e.slides[t].swiperSlideOffset||0;return e.rtlTranslate?i:-i}function y(e,t){i||(e.setTranslate(t),e.slides.forEach(e=>{const t=e.querySelector(".slider-img");if(!t)return;const i="number"==typeof e.progress?e.progress:0;gsap.set(t,{xPercent:28*i})}))}function w(){n&&(n.kill(),n=null)}function f(e){w(),i||(n=gsap.delayedCall(4.2,e))}function v(e,t="next"){if(!r)return;w(),s&&(s.kill(),s=null);const i=function(e){let t=-1;return e.slides.forEach(e=>{const i=parseInt(e.getAttribute("data-swiper-slide-index")||"0",10);!Number.isNaN(i)&&i>t&&(t=i)}),t+1}(e),n=e.activeIndex,c=e.slides[n];let l;l="next"===t?(e.realIndex+1)%i:"prev"===t?(e.realIndex-1+i)%i:"number"==typeof t?(t%i+i)%i:(e.realIndex+1)%i,e.updateSlides(),e.updateSlidesOffset();const d=function(e,t,i){let o=-1,r=1/0;return e.slides.forEach((s,n)=>{if(parseInt(s.getAttribute("data-swiper-slide-index")||"-1",10)!==t)return;const a=g(e,n),c=Math.abs(a-i);c<r&&(r=c,o=n)}),o}(e,l,a);e.slideTo(d,0,!1),e.updateSlides(),e.updateSlidesOffset();const u=e.activeIndex,h=e.slides[u],p=a;let S=g(e,u);if(p===S){const t=e.rtlTranslate?-1:1;S-=t*e.width}s=gsap.timeline({onUpdate:()=>{const t=gsap.getProperty(r,"x");y(e,t)},onComplete:()=>{a=S,f(()=>v(e,"next"))}}),function(e){const t=m(e);t&&(gsap.killTweensOf(t.chars),gsap.to(t.chars,{yPercent:-120,rotate:-4,opacity:0,duration:.5,ease:"power2.in",stagger:{each:.015,from:"end"},onComplete:()=>{gsap.set(t.chars,{yPercent:120,rotate:6,opacity:0})}}))}(c),function(e){const t=m(e);t&&(gsap.killTweensOf(t.chars),gsap.set(t.chars,{yPercent:120,rotate:6,opacity:0}))}(h),s.fromTo(r,{x:p},{x:S,duration:o,ease:"power4.inOut"},0),s.add(()=>function(e){const t=m(e);t&&(gsap.killTweensOf(t.chars),gsap.to(t.chars,{yPercent:0,rotate:0,opacity:1,duration:.9,ease:"power3.out",stagger:{each:.02,from:"start"}}))}(h),.3*o)}const S=new Swiper(".swiper",{loop:!0,slidesPerView:1,allowTouchMove:!1,speed:0,virtualTranslate:!0,watchSlidesProgress:!0,on:{init(e){r=e.el.querySelector(".swiper-wrapper"),e.slides.forEach(m),e.updateSlides(),e.updateSlidesOffset(),a=g(e,e.activeIndex),gsap.set(r,{x:a,willChange:"transform",force3D:!0}),y(e,a),function(e){const o=document.querySelector('[data-taxi-view="home"]');if(o&&(window.gsap?gsap.set(o,{opacity:1}):o.style.opacity="1"),!window.gsap)return Promise.resolve();const r=gsap.timeline(),s=document.querySelector(".hero-heading");s&&r.fromTo(s,{opacity:0,scale:.8},{opacity:1,scale:1,duration:.85,ease:"expo.inOut",transformOrigin:"top left"},0);const n=document.querySelectorAll(".btn-group > *");n.length>0&&(gsap.set(n,{clearProps:"transform"}),gsap.set(n,{yPercent:102}),r.to(n,{yPercent:0,duration:.85,ease:"expo.inOut",stagger:.045},.09));const a=document.querySelector(".hero-cover");a&&r.fromTo(a,{width:"100%"},{width:"0%",duration:.85,ease:"expo.inOut"},.28);const c=document.querySelector(".sm-premium");if(c&&window.SplitText){gsap.set(c,{opacity:1});const e=new SplitText(c,{type:"chars"});gsap.set(e.chars,{opacity:0}),r.to(e.chars,{opacity:1,duration:1.05,ease:"power1.out",stagger:.017},.4)}if(t&&r.fromTo(t,{scale:1.1},{scale:1,duration:1.05,ease:"expo.out"},.42),e&&!i){const t=m(e.slides[e.activeIndex]);t&&r.to(t.chars,{yPercent:0,rotate:0,opacity:1,duration:.9,ease:"power3.out",stagger:{each:.02,from:"start"}},.8)}const l=document.querySelector(".footer-section");return l&&(gsap.set(l,{opacity:0}),r.to(l,{opacity:1,duration:.8,ease:"power2.inOut"},.9)),r}(e).then(()=>{f(()=>v(e,"next"))})},resize(e){e.updateSlides(),e.updateSlidesOffset(),a=g(e,e.activeIndex),gsap.set(r,{x:a}),y(e,a)}}}),b=()=>{document.hidden?w():f(()=>v(S,"next"))};document.addEventListener("visibilitychange",b),u("home",{setupScrollAnimations:()=>{!function(){if(!window.gsap||!window.ScrollTrigger)return;h.forEach(e=>e.kill()),h=[],ScrollTrigger.config({limitCallbacks:!0,syncInterval:150});const e=document.querySelector(".featured-materials-content");if(e){const t=gsap.fromTo(e,{opacity:0},{opacity:1,duration:.3,ease:"power1.inOut",paused:!0,force3D:!0,willChange:"opacity"}),i=ScrollTrigger.create({trigger:e,start:"10% bottom",animation:t,toggleActions:"play none none reverse",fastScrollEnd:!0});h.push(i)}const t=document.querySelector(".featured-materials-grid");if(t){const e=gsap.utils.toArray(t.children);if(e.length>0){const i=gsap.fromTo(e,{opacity:0},{opacity:1,duration:.5,ease:"power1.inOut",stagger:.1,paused:!0,force3D:!0,willChange:"opacity"}),o=ScrollTrigger.create({trigger:t,start:"top 90%",animation:i,toggleActions:"play none none reverse",fastScrollEnd:!0});h.push(o)}}gsap.utils.toArray(".txt-lg").forEach(e=>{if(window.SplitText){const t=new SplitText(e,{type:"words,chars"}),i=gsap.fromTo(t.chars,{opacity:0,x:50},{opacity:1,x:0,duration:1,ease:"power4.inOut",stagger:{amount:.15},paused:!0,force3D:!0,willChange:"opacity, transform"}),o=ScrollTrigger.create({trigger:e,start:"bottom bottom",animation:i,toggleActions:"play none none reverse",fastScrollEnd:!0});h.push(o)}}),gsap.utils.toArray("[data-btn-scroll]").forEach(e=>{const t=gsap.fromTo(e,{yPercent:100},{yPercent:0,duration:.8,ease:"power4.inOut",paused:!0,force3D:!0,willChange:"transform"}),i=ScrollTrigger.create({trigger:e,start:"bottom bottom",animation:t,toggleActions:"play none none reverse",fastScrollEnd:!0});h.push(i)}),requestAnimationFrame(()=>{window.ScrollTrigger&&ScrollTrigger.refresh()})}()},playExitAnimation:()=>(d=function(){const e=gsap.timeline();!function(e){if(!window.gsap)return;h.forEach(e=>e.kill()),h=[];const t=document.querySelector(".featured-materials-content");if(t){const i=[],o=t.querySelector(".featured-materials-grid");o&&i.push(...gsap.utils.toArray(o.children)),i.push(...gsap.utils.toArray(t.querySelectorAll(".txt-lg"))),i.push(...gsap.utils.toArray(t.querySelectorAll("[data-btn-scroll]"))),i.length>0&&e.to(i,{opacity:0,duration:.4,ease:"power2.inOut",stagger:.03},0),e.to(t,{opacity:0,duration:.4,ease:"power2.inOut"},.2)}}(e);const i=document.querySelector(".footer-section");i&&e.to(i,{opacity:0,duration:.8,ease:"power2.inOut"},0);const o=document.querySelector(".sm-premium");if(o&&window.SplitText){const t=new SplitText(o,{type:"chars"});e.fromTo(t.chars,{opacity:1},{opacity:0,duration:.65,ease:"power1.out",stagger:.009},0)}const r=document.querySelector(".hero-heading");r&&e.fromTo(r,{opacity:1,scale:1},{opacity:0,scale:.8,duration:.8,ease:"expo.inOut",transformOrigin:"top left"},0);const s=document.querySelectorAll(".btn-group > *");s.length>0&&e.fromTo(s,{yPercent:0},{yPercent:102,duration:.8,ease:"expo.inOut",stagger:.045},.05);const n=document.querySelector(".hero-cover");return n&&e.fromTo(n,{width:"0%"},{width:"100%",duration:.8,ease:"expo.inOut"},.16),t&&e.fromTo(t,{scale:1},{scale:.5,duration:.8,ease:"expo.in"},.16),e}(),d),destroy:()=>{try{document.removeEventListener("visibilitychange",b)}catch(e){}try{w()}catch(e){}try{s?.kill?.()}catch(e){}try{S?.destroy?.(!0,!0)}catch(e){}try{enterAnimation?.kill?.()}catch(e){}try{d?.kill?.()}catch(e){}try{h.forEach(e=>e.kill()),h=[]}catch(e){}}})}class g{constructor(){this.allLoadedItems=[],this.totalItems=0,this.activeFilters={},this.currentSort="recommended",this.currentPage=1,this.itemsPerPage=10,this.hasMorePages=!0,this.clickedProductId=null}getItems(){return this.allLoadedItems}getTotalItems(){return this.totalItems}getActiveFilters(){return this.activeFilters}getCurrentSort(){return this.currentSort}getCurrentPage(){return this.currentPage}hasFilters(){return Object.values(this.activeFilters).some(e=>Array.isArray(e)&&e.length>0)}setItems(e){this.allLoadedItems=[...e]}appendItems(e){this.allLoadedItems.push(...e)}setTotalItems(e){this.totalItems=e}setActiveFilters(e){this.activeFilters={...e}}setCurrentSort(e){this.currentSort=e}setCurrentPage(e){this.currentPage=e}incrementPage(){this.currentPage++}setHasMorePages(e){this.hasMorePages=e}setClickedProductId(e){this.clickedProductId=e}reset(){this.allLoadedItems=[],this.currentPage=1,this.hasMorePages=!0}toJSON(){return{allLoadedItems:this.allLoadedItems,totalItems:this.totalItems,activeFilters:this.activeFilters,currentSort:this.currentSort,currentPage:this.currentPage,hasMorePages:this.hasMorePages,clickedProductId:this.clickedProductId}}fromJSON(e){e&&(this.allLoadedItems=e.allLoadedItems||[],this.totalItems=e.totalItems||0,this.activeFilters=e.activeFilters||{},this.currentSort=e.currentSort||"recommended",this.currentPage=e.currentPage||1,this.hasMorePages=void 0===e.hasMorePages||e.hasMorePages,this.clickedProductId=e.clickedProductId||null)}}class y{constructor(){this.cacheExpiration=3e5}getCacheKey(e=null){let t;if(e){t=new URLSearchParams;const i=e.getActiveFilters();Object.entries(i).forEach(([e,i])=>{i&&i.length>0&&t.set(e,i.join(","))});const o=e.getCurrentSort();o&&"recommended"!==o&&t.set("sort",o)}else t=new URLSearchParams(window.location.search),t.delete("page"),t.delete("limit"),t.delete("config"),t.delete("collection_id");return`collections_${Array.from(t.entries()).sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>`${e}=${t}`).join("&")||"default"}`}save(e){try{const t=this.getCacheKey(e),i={...e.toJSON(),timestamp:Date.now()};return sessionStorage.setItem(t,JSON.stringify(i)),!0}catch(e){return console.error("Failed to save to cache:",e),!1}}restore(e=!1,t=null){try{const i=this.getCacheKey(t),o=sessionStorage.getItem(i);if(!o)return null;const r=JSON.parse(o);return Date.now()-r.timestamp>this.cacheExpiration?(sessionStorage.removeItem(i),null):r.allLoadedItems&&0!==r.allLoadedItems.length?(e||(r.clickedProductId=null),r):null}catch(e){console.error("Failed to restore from cache:",e);const t=this.getCacheKey();return sessionStorage.removeItem(t),null}}clear(){const e=this.getCacheKey();sessionStorage.removeItem(e)}clearAll(){const e=[];for(let t=0;t<sessionStorage.length;t++){const i=sessionStorage.key(t);i.startsWith("collections_")&&e.push(i)}e.forEach(e=>sessionStorage.removeItem(e))}}class w{constructor(e="c09bba8e-4a81-49c2-b722-f1fa46c75861"){this.collectionId=e,this.baseUrl="https://wmkcwljhyweqzjivbupx.supabase.co/functions/v1/generic-collection-filter",this.abortController=null,this.responseCache=new Map}buildRequestUrl(e){const t=new URLSearchParams({collection_id:this.collectionId,page:e.getCurrentPage().toString(),limit:e.itemsPerPage.toString(),sort:e.getCurrentSort()});return Object.entries(e.getActiveFilters()).forEach(([e,i])=>{if(i.length>0){const o={application:"application-slugs",material:"material",featured:"featured",thickness:"thickness"};if(["colors","color","size","finish"].includes(e))t.set(`filter_${e}`,i.join(","));else{const r=o[e]||e;t.set(`filter_${r}`,i.join(","))}}}),t.set("config",JSON.stringify({searchFields:["name","description","actual-product-name"],sortFields:{"a-z":"name:asc","z-a":"name:desc",recommended:"sort-order:asc",featured:"featured:desc"},relatedItems:{enabled:!0,relationField:"variants"},relatedItemFields:["colors","color","size","finish"],customFilters:{"application-slugs":{type:"ilike"},material:{type:"exact"},featured:{type:"boolean"},thickness:{type:"numeric"},color:{type:"exact"},colors:{type:"exact"},size:{type:"array_contains"},finish:{type:"array_contains"}}})),`${this.baseUrl}?${t.toString()}`}async fetchItems(e){const t=this.buildRequestUrl(e);if(this.responseCache.has(t))return this.responseCache.get(t);this.abortController&&this.abortController.abort(),this.abortController=new AbortController;try{const e=await fetch(t,{signal:this.abortController.signal});if(!e.ok){if(403===e.status)throw new Error("Access denied. Please contact support.");throw new Error(`HTTP ${e.status}: ${e.statusText}`)}const i=await e.text();let o;try{o=JSON.parse(i)}catch(e){throw console.error("JSON parse error:",e),console.error("Response text:",i),new Error("Invalid response format from server")}return this.responseCache.set(t,o),o}catch(e){if("AbortError"!==e.name)throw console.error("[API] Fetch error:",e),e;throw e}}clearCache(){this.responseCache.clear()}}class f{constructor(e){if(this.container=document.querySelector(e),!this.container)throw console.error(`Container not found: ${e}`),new Error(`Container not found: ${e}`)}async renderItems(e,t=!1){this.container.querySelectorAll(".skeleton-item").length>0&&await this.removeSkeletonLoaders(!0),this.container.innerHTML="";const i=document.createDocumentFragment();e.forEach(e=>{const t=this.createProductElement(e);i.appendChild(t)}),this.container.appendChild(i);const o=this.container.querySelectorAll(".collection_grid-item");this.animateItemsIn(o),this.waitForImagesToLoad(this.container.querySelectorAll("img"))}async appendItems(e){await this.removeSkeletonLoaders(!0);const t=document.createDocumentFragment();e.forEach(e=>{const i=this.createProductElement(e);t.appendChild(i)}),this.container.appendChild(t);const i=Array.from(this.container.querySelectorAll(".collection_grid-item")).slice(-e.length);this.animateItemsIn(i);const o=Array.from(this.container.querySelectorAll("img")).slice(4*-e.length);this.waitForImagesToLoad(o)}clear(){this.container.innerHTML=""}createProductElement(e){const t=e.name||e["actual-product-name"]||"Untitled",i=e.image?.url||"https://cdn.prod.website-files.com/plugins/Basic/assets/placeholder.60f9b1840c.svg",o=`/collections/${e.slug||e.webflow_item_id||""}`,r=document.createElement("div");return r.setAttribute("role","listitem"),r.className="w-dyn-item",r.innerHTML=`\n      <div class="collection_grid-item" data-base-url="${o}" data-product-id="${o}" data-hover-initialized="false">\n        <a href="${o}" class="collection_image-cover">\n          <img src="${i}" loading="lazy" alt="${t}" class="img-2" data-original-src="${i}">\n        </a>\n        <div class="progressive-blur">\n            <div class="blur"></div>\n        </div>\n        <div class="gradient-cover"></div>\n        <div class="collection-overlay">\n          <a href="${o}" class="collection_details">\n            <div class="truncate">${t}</div>\n          </a>\n          ${this.createProductMetaHTML(e)}\n          ${this.createVariantThumbnailsHTML(e.related_items,o)}\n        </div>\n      </div>\n    `,r}createProductMetaHTML(e){return`\n      <div data-thickness="${e.thickness||""}" data-applications="${e["application-slugs"]||""}" data-material="${e.material||""}" class="product-meta">\n        ${e.featured?'<div class="is-featured-flag"></div>':""}\n      </div>\n    `}createVariantThumbnailsHTML(e,t){return e&&0!==e.length?`\n      <div class="collection-list-wrapper w-dyn-list">\n        <div role="list" class="variant_thumbnail-list w-dyn-items">\n          ${e.map(e=>{const i=e["image-3"]?.url||"https://cdn.prod.website-files.com/plugins/Basic/assets/placeholder.60f9b1840c.svg",o=e["finish-slugs"]||"",r=this.extractColorName(e.color,e.slug),s=e["size-slugs"]||"",n=e.name||e.slug||e.webflow_item_id||"",a=e.slug||e.webflow_item_id||"";return`\n          <div role="listitem" class="w-dyn-item">\n            <a href="${a?`${t}?variant=${a}`:t}" class="variant-thumb-link" style="display: block; line-height: 0;">\n              <img src="${i}" loading="lazy" alt="${n}" class="variant-thumb" style="cursor: pointer;">\n            </a>\n            <div data-finishes="${o}" data-name="${n}" data-slug="${a}" data-color="${r}" data-sizes="${s}" class="variant-meta"></div>\n          </div>\n        `}).join("")}\n        </div>\n      </div>\n    `:'\n        <div class="collection-list-wrapper w-dyn-list">\n          <div role="list" class="variant_thumbnail-list w-dyn-items"></div>\n        </div>\n      '}extractColorName(e,t){return e?e.replace(/\s*\(.*?\)\s*/g,"").trim()||t||"":t||""}showSkeletonLoaders(e){for(let t=0;t<e;t++){const e=document.createElement("div");e.className="skeleton-item collection_grid-item",e.style.cssText="\n        background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\n        background-size: 200% 100%;\n        animation: shimmer 2.5s infinite;\n        min-height: 300px;\n        opacity: 0;\n      ",this.container.appendChild(e)}if(window.gsap){const e=this.container.querySelectorAll(".skeleton-item");gsap.to(e,{opacity:.6,duration:.3,ease:"power2.out",stagger:.05})}else this.container.querySelectorAll(".skeleton-item").forEach((e,t)=>{setTimeout(()=>e.style.opacity="0.6",50*t)})}async removeSkeletonLoaders(e=!1){const t=this.container.querySelectorAll(".skeleton-item");return 0===t.length?Promise.resolve():e&&window.gsap?new Promise(e=>{gsap.to(t,{opacity:0,duration:.2,ease:"power2.in",onComplete:()=>{t.forEach(e=>e.remove()),e()}})}):(t.forEach(e=>e.remove()),Promise.resolve())}animateItemsIn(e){window.gsap&&e&&0!==e.length&&(gsap.set(e,{opacity:0,y:20}),requestAnimationFrame(()=>{gsap.to(e,{opacity:1,y:0,duration:.5,ease:"power2.out",stagger:.025,delay:.15})}))}waitForImagesToLoad(e){if(!e||0===e.length)return;const t=Array.from(e).map(e=>e.complete?Promise.resolve():new Promise(t=>{e.addEventListener("load",t),e.addEventListener("error",t)}));Promise.all(t).then(()=>{window.lenis&&window.lenis.resize()})}}class v{constructor(e,t){if(this.container=document.querySelector(e),this.callback=t,this.observer=null,this.sentinel=null,!this.container)throw new Error(`Container not found: ${e}`)}init(){this.sentinel&&this.sentinel.remove(),this.sentinel=document.createElement("div"),this.sentinel.className="infinite-scroll-sentinel",this.sentinel.style.cssText="height: 1px; width: 100%; clear: both;",this.container.after(this.sentinel),this.observer=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&this.callback()})},{root:null,rootMargin:"200px",threshold:0}),this.observer.observe(this.sentinel)}destroy(){this.observer&&(this.observer.disconnect(),this.observer=null),this.sentinel&&(this.sentinel.remove(),this.sentinel=null)}}class S{constructor(e){this.page=e,this.filterForm=document.getElementById("filters"),this.sortDropdown=document.getElementById("sort-select"),this.clearButton=document.querySelector(".button.alt"),this.productContainer=document.querySelector(".product-grid"),this.niceSelect=null,this._ac=new AbortController}init(){this.initNiceSelect(),this.niceSelect||setTimeout(()=>{this.initNiceSelect()},500),this.initEventListeners(),this.initFilterChipEvents(),this.setupProductClickTracking()}initNiceSelect(){if(this.sortDropdown&&"undefined"!=typeof NiceSelect)try{const e=this.sortDropdown.parentElement?.querySelector(".nice-select");e&&e.remove(),this.sortDropdown.style.display="",this.niceSelect=NiceSelect.bind(this.sortDropdown,{searchable:!1,placeholder:"Select...",searchtext:"Search",selectedtext:"geselecteerd"})}catch(e){console.error("  ❌ Failed to initialize Nice Select 2:",e)}}updateNiceSelect(e){if(this.sortDropdown)try{this.sortDropdown.value=e,this.niceSelect&&this.niceSelect.update()}catch(e){console.error("Failed to update Nice Select:",e)}}syncUIWithState(){const e=this.page.state.getCurrentSort();this.updateNiceSelect(e);const t=this.page.state.getActiveFilters();this.filterForm&&this.filterForm.querySelectorAll('input[type="checkbox"]').forEach(e=>e.checked=!1);const i={colors:["color","colors","Color","Colors"],color:["color","colors","Color","Colors"],size:["size","sizes","Size","Sizes"],finish:["finish","finishes","Finish","Finishes"],application:["application","applications","Application","Applications"],material:["material","materials","Material","Materials"],thickness:["thickness","Thickness"]};Object.entries(t).forEach(([e,t])=>{const o=i[e]||[e];t.forEach(e=>{let t=null;for(const i of o)if(t=this.filterForm?.querySelector(`input[name="${i}"][value="${e}"]`),t)break;t&&(t.checked=!0)})}),this.updateFilterChips()}initEventListeners(){this.filterForm&&this.filterForm.addEventListener("change",async e=>{"checkbox"===e.target.type&&(this.updateFiltersFromCheckboxes(),await this.applyFilters())},{signal:this._ac.signal}),this.sortDropdown&&this.sortDropdown.addEventListener("change",async e=>{this.page.state.setCurrentSort(e.target.value),await this.applyFilters()},{signal:this._ac.signal}),this.clearButton&&this.clearButton.addEventListener("click",async e=>{e.preventDefault(),await this.clearAllFilters()},{signal:this._ac.signal})}updateFiltersFromCheckboxes(){const e={};this.filterForm.querySelectorAll('input[type="checkbox"]:checked').forEach(t=>{const i=t.name,o=t.value,r=this.normalizeFilterKey(i);e[r]||(e[r]=[]),e[r].push(o)}),this.page.state.setActiveFilters(e),this.updateFilterChips()}normalizeFilterKey(e){const t=(e||"").toString().trim().toLowerCase().replace(/\s+/g,"-");return"color"===t||"colors"===t?"colors":"size"===t||"sizes"===t?"size":"finish"===t||"finishes"===t?"finish":"material"===t||"materials"===t?"material":"application"===t||"applications"===t?"application":t}async applyFilters(){this.page.api.abortController&&this.page.api.abortController.abort(),this.page.api.abortController=new AbortController,this.page.state.setCurrentPage(1),this.page.state.setItems([]),this.page.renderer.container.innerHTML="";const e=this.page.cache.restore(!1,this.page.state);e?(this.page.state.fromJSON(e),await this.page.renderer.renderItems(this.page.state.getItems(),!0),this.page.updateUI(),this.setupProductClickTracking(),this.initImageHover(),this.updateProductImages(),this.updateProductLinks()):await this.page.fetchItems(!1),this.updateURLParams(),this.updateProductLinks()}async clearAllFilters(){this.filterForm.querySelectorAll('input[type="checkbox"]:checked').forEach(e=>e.checked=!1),this.page.state.setCurrentSort("recommended"),this.updateNiceSelect("recommended"),this.updateFiltersFromCheckboxes(),await this.applyFilters()}updateFilterChips(){const e=document.querySelector(".filter-chip-group");if(!e)return;e.innerHTML="";const t=this.page.state.getActiveFilters();Object.entries(t).forEach(([t,i])=>{i.forEach(i=>{const o=document.createElement("div");o.className="filter-chip",o.setAttribute("data-chip-value",i),o.setAttribute("data-chip-filter",t);const r=i.charAt(0).toUpperCase()+i.slice(1);o.innerHTML=`\n            <div class="remove-btn"><div class="text-block-4">x</div></div>\n            <div>${r}</div>\n          `,e.appendChild(o)})})}initFilterChipEvents(){document.addEventListener("click",async e=>{const t=e.target.closest(".remove-btn");if(!t)return;const i=t.closest(".filter-chip");if(!i)return;const o=i.getAttribute("data-chip-filter"),r=i.getAttribute("data-chip-value");await this.removeFilter(o,r)},{signal:this._ac.signal})}async removeFilter(e,t){const i={colors:["color","colors","Color","Colors"],color:["color","colors","Color","Colors"],size:["size","sizes","Size","Sizes"],finish:["finish","finishes","Finish","Finishes"],application:["application","applications","Application","Applications"],material:["material","materials","Material","Materials","material-type","materialtype"],thickness:["thickness","Thickness"]}[e]||[e];let o=null;for(const e of i)if(o=this.filterForm?.querySelector(`input[name="${e}"][value="${t}"]`),o)break;o&&(o.checked=!1,this.updateFiltersFromCheckboxes(),await this.applyFilters())}updateURLParams(){const e=new URLSearchParams,t=this.page.state.getActiveFilters();Object.entries(t).forEach(([t,i])=>{i.length>0&&e.set(t,i.join(","))});const i=this.page.state.getCurrentSort();"recommended"!==i&&e.set("sort",i);const o=e.toString()?`${window.location.pathname}?${e.toString()}`:window.location.pathname;window.history.replaceState({},"",o)}updateProductLinks(){const e=document.querySelectorAll(".collection_grid-item"),t=this.page.state.getActiveFilters(),i=t.colors||t.color;e.forEach(e=>{const t=e.dataset.baseUrl||"",o=e.querySelectorAll(".collection_image-cover, .collection_details");let r=t;if(i&&1===i.length){const o=this.getVariantsForColor(e,i[0].toLowerCase());1===o.length&&(r=`${t}?variant=${o[0]}`)}o.forEach(e=>{e.href=r})})}getVariantsForColor(e,t){const i=e.querySelectorAll(".variant-thumb"),o=[];return i.forEach(e=>{const i=e.closest(".w-dyn-item")?.querySelector(".variant-meta");if(!i)return;const r=i.getAttribute("data-color"),s=i.getAttribute("data-slug");r&&s&&r.split(",").map(e=>e.trim().toLowerCase()).includes(t)&&o.push(s)}),o}updateProductImages(){const e=this.page.state.getActiveFilters().colors||this.page.state.getActiveFilters().color;document.querySelectorAll(".collection_grid-item").forEach((t,i)=>{setTimeout(()=>{if(e&&1===e.length){const i=this.getVariantImageForColor(t,e[0]);i&&this.showImageOverlay(t,i.src,i.alt,!0)}else this.restoreOriginalImage(t)},1*i)})}getVariantImageForColor(e,t){const i=e.querySelectorAll(".variant-thumb"),o=t.toLowerCase();for(const e of i){const t=e.nextElementSibling;if(!t||!t.classList.contains("variant-meta"))continue;const i=t.getAttribute("data-color");if(i&&i.split(",").map(e=>e.trim().toLowerCase()).includes(o))return{src:e.src,alt:e.alt}}return null}initImageHover(){const e=document.querySelectorAll(".collection_grid-item");let t=0;const i=()=>{Array.from(e).slice(t,t+5).forEach(e=>{if("true"===e.dataset.hoverInitialized)return;const t=e.querySelectorAll(".variant-thumb"),i=e.querySelector(".variant_thumbnail-list");if(0===t.length)return;let o,r=!1;i&&(i.addEventListener("mouseenter",()=>{r=!0,o&&(clearTimeout(o),o=null)},{passive:!0}),i.addEventListener("mouseleave",()=>{r=!1,o=setTimeout(()=>{this.hideImageOverlay(e)},200)},{passive:!0})),t.forEach(t=>{t.addEventListener("mouseenter",()=>{o&&(clearTimeout(o),o=null),e.querySelector(".overlay-img[data-permanent]")||this.showImageOverlay(e,t.src,t.alt,!1)},{passive:!0}),t.addEventListener("mouseleave",()=>{r||(o=setTimeout(()=>{this.hideImageOverlay(e)},200))},{passive:!0})}),e.dataset.hoverInitialized="true"}),t+=5,t<e.length&&requestAnimationFrame(i)};e.length>0&&requestAnimationFrame(i)}createImageOverlay(e,t){return`\n      <img \n        src="${e}" \n        alt="${t}" \n        loading="lazy"\n        class="img-2 overlay-img"\n        style="opacity: 0; transition: opacity 0.3s ease;"\n      >\n    `}showImageOverlay(e,t,i,o=!1){const r=e.querySelector(".collection_image-cover");if(!r)return;const s=r.querySelector(".overlay-img");s&&(s.style.opacity="0",setTimeout(()=>s.remove(),10));const n=this.createImageOverlay(t,i),a=r.querySelector(".img-2:not(.overlay-img)");if(!a)return;a.insertAdjacentHTML("afterend",n);const c=r.querySelector(".overlay-img");c&&requestAnimationFrame(()=>{c.style.opacity="1",e.dataset.hasOverlay="true",o&&(c.dataset.permanent="true",setTimeout(()=>{this.replaceMainImage(e,t,i)},300))})}hideImageOverlay(e){const t=e.querySelector(".collection_image-cover");if(!t)return;const i=t.querySelector(".overlay-img");i&&!i.dataset.permanent&&(i.style.opacity="0",setTimeout(()=>{i.parentNode&&(i.remove(),e.removeAttribute("data-has-overlay"))},300))}replaceMainImage(e,t,i){const o=e.querySelector(".img-2:not(.overlay-img)");o&&(o.src=t,o.alt=i)}restoreOriginalImage(e){const t=e.querySelector(".img-2:not(.overlay-img)"),i=e.querySelector(".overlay-img[data-permanent]");if(!t)return;const o=t.dataset.originalSrc,r=t.alt;o&&(i&&(i.style.opacity="0",setTimeout(()=>{i.parentNode&&(i.remove(),e.removeAttribute("data-has-overlay"))},300)),setTimeout(()=>{this.replaceMainImage(e,o,r)},i?300:0))}setupProductClickTracking(){this.productContainer.querySelectorAll(".collection_image-cover, .collection_details, .variant-thumb-link").forEach(e=>{e.removeEventListener("click",this._productClickHandler),e.addEventListener("click",this._productClickHandler)})}_productClickHandler=e=>{const t=e.currentTarget.closest(".collection_grid-item");if(t){const e=t.dataset.productId||t.dataset.baseUrl;e&&(this.page.state.setClickedProductId(e),this.page.cache.save(this.page.state))}};destroy(){if(this._ac.abort(),this.niceSelect)try{const e=this.sortDropdown?.parentElement?.querySelector(".nice-select");e&&e.remove(),this.sortDropdown&&(this.sortDropdown.style.display=""),this.niceSelect=null}catch(e){console.error("Failed to destroy NiceSelect:",e)}}}function b(){b._ac?.abort?.();const e=new AbortController;b._ac=e;const t=document.querySelector("#filters-open"),i=document.querySelector(".close-filters"),o=document.querySelector(".filter-drawer"),r=document.querySelector(".filter-controls");if(!o||!r)return;if(!window.gsap)return;const s=document.querySelector(".page-wrapper");s&&o.parentElement!==s&&(s.querySelectorAll(".filter-drawer").forEach(e=>{e!==o&&e.remove()}),s.appendChild(o)),gsap.set(o,{clearProps:"all"}),gsap.set(r,{clearProps:"all"}),gsap.set(o,{display:"none",opacity:0,position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:30}),gsap.set(r,{xPercent:100}),t&&t.addEventListener("click",()=>{window.lenis&&window.lenis.stop(),gsap.set(o,{display:"flex",position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:30}),gsap.timeline({defaults:{ease:"power1.inOut"}}).to(o,{opacity:1,duration:.1}).to(r,{xPercent:0,ease:"power4.out",duration:.4},.06)},{signal:e.signal});const n=()=>{gsap.timeline({defaults:{ease:"power1.inOut",duration:.1},onComplete:()=>{gsap.set(o,{display:"none"}),window.lenis&&window.lenis.start()}}).to(r,{xPercent:100,ease:"power4.in",duration:.2}).to(o,{opacity:0,duration:.05},"-=0.1")};i&&i.addEventListener("click",n,{signal:e.signal}),o&&o.addEventListener("click",e=>{e.target===o&&n()},{signal:e.signal})}class x{constructor(){this.state=new g,this.cache=new y,this.api=new w,this.renderer=new f(".product-grid"),this.infiniteScroll=null,this.interactions=null,this.isLoading=!1}playPageEnterAnimation(){const e=document.querySelector('[data-taxi-view="collections"]');if(e&&(e.style.opacity="1",window.gsap&&window.gsap.set(e,{opacity:1,force3D:!1})),!window.gsap)return Promise.resolve();const t=window.gsap.timeline(),i=document.querySelector(".font-color-primary");if(i&&window.SplitText){const e=new window.SplitText(i,{type:"chars",charsClass:"char"});window.gsap.set(e.chars,{yPercent:100}),t.to(e.chars,{yPercent:0,duration:.65,ease:"expo.out",stagger:.007},0)}const o=document.querySelector("#filters-open");o&&(window.gsap.set(o,{clearProps:"transform"}),window.gsap.set(o,{yPercent:100}),t.to(o,{yPercent:0,duration:.65,ease:"expo.out"},.035));const r=document.querySelector(".footer-section");return r&&(window.gsap.set(r,{opacity:0}),t.to(r,{opacity:1,duration:.5,ease:"power2.inOut"},.35)),t}playPageExitAnimation(){if(!window.gsap)return Promise.resolve();const e=window.gsap.timeline(),t=document.querySelector(".footer-section");t&&e.to(t,{opacity:0,duration:.4,ease:"power2.inOut"},0);const i=document.querySelector(".font-color-primary");if(i&&window.SplitText){const t=new window.SplitText(i,{type:"chars",charsClass:"char"});e.to(t.chars,{yPercent:100,duration:.35,ease:"power2.in",stagger:.005},0)}const o=document.querySelector("#filters-open");o&&e.to(o,{yPercent:100,duration:.35,ease:"power2.in"},.035);const r=document.querySelectorAll(".collection_grid-item");return r.length>0&&e.to(r,{opacity:0,y:15,duration:.32,ease:"power2.in",stagger:.013},.07),e}setupFilterUI(){b(),this.setupFilterAccordions(),this.interactions=new S(this),this.interactions.init()}setupFilterAccordions(){window.gsap&&document.querySelectorAll(".filter-header").forEach(e=>{if("true"===e.dataset.accordionInit)return;const t=e.closest(".filter-group"),i=e.querySelector(".icon-sm");if(!t||!i)return;const o=window.gsap.timeline({paused:!0,onComplete:()=>{e._isOpen=!0},onReverseComplete:()=>{e._isOpen=!1}});o.fromTo(t,{height:"2em"},{height:"auto",duration:.25,ease:"power3.inOut"},0),o.fromTo(i,{rotation:-90},{rotation:0,duration:.25,ease:"power3.inOut"},0),e._timeline=o,e._isOpen=!1,e.addEventListener("click",()=>{o.isActive()?o.reversed(!o.reversed()):e._isOpen?(o.reverse(),e._isOpen=!1):(o.play(),e._isOpen=!0)}),e.dataset.accordionInit="true"})}async init(e=!1){u("collections",{playExitAnimation:()=>this.playPageExitAnimation()}),this.playPageEnterAnimation(),this.setupFilterUI(),this.loadURLParams(),this.interactions&&this.interactions.syncUIWithState();const t=this.cache.restore(e);t?(this.state.fromJSON(t),await this.renderer.renderItems(this.state.getItems(),!0),this.updateUI(),this.interactions&&(this.interactions.setupProductClickTracking(),this.interactions.initImageHover(),this.interactions.updateProductImages(),this.interactions.updateProductLinks()),e&&this.state.clickedProductId&&(window.__pendingScrollRestoration=this.state.clickedProductId)):await this.loadInitialData(),this.initInfiniteScroll(),this.cache.save(this.state)}loadURLParams(){const e=new URLSearchParams(window.location.search),t=e.get("sort");t&&this.state.setCurrentSort(t);const i={};for(const[t,o]of e.entries())["sort","page","limit","config","collection_id"].includes(t)||o&&(i[t]=o.split(","));this.state.setActiveFilters(i)}async loadInitialData(){this.state.reset(),await this.fetchItems()}async fetchItems(e=!1){if(!this.isLoading){this.isLoading=!0;try{if(e){const e=this.state.getTotalItems()-this.state.getItems().length,t=Math.min(e,this.state.itemsPerPage);this.renderer.showSkeletonLoaders(t)}else this.renderer.showSkeletonLoaders(this.state.itemsPerPage);await new Promise(e=>setTimeout(e,150));const t=await this.api.fetchItems(this.state);e?this.state.appendItems(t.items):this.state.setItems(t.items),this.state.setTotalItems(t.pagination.total),this.state.setHasMorePages(t.pagination.hasMore||!1),e?await this.renderer.appendItems(t.items):await this.renderer.renderItems(t.items),this.updateUI(),this.interactions&&(this.interactions.setupProductClickTracking(),this.interactions.initImageHover(),this.interactions.updateProductImages(),this.interactions.updateProductLinks()),this.state.incrementPage(),this.cache.save(this.state)}catch(e){"AbortError"!==e.name&&(console.error("Fetch error:",e),this.handleError(e))}finally{this.isLoading=!1}}}initInfiniteScroll(){this.infiniteScroll&&this.infiniteScroll.destroy(),this.infiniteScroll=new v(".product-grid",()=>{this.state.hasMorePages&&!this.isLoading&&this.fetchItems(!0)}),this.infiniteScroll.init()}updateUI(){const e=document.querySelector("[data-results-count]");e&&(e.textContent=this.state.getTotalItems());const t=document.querySelector(".button.alt");if(t){const e=this.state.hasFilters();t.style.opacity=e?"1":"0.5",t.disabled=!e}}handleError(e){console.error("CollectionsPage error:",e),this.renderer.clear(),this.renderer.container.innerHTML=`\n      <div style="grid-column: 1 / -1; text-align: center; padding: 2rem; background: #fee; border: 1px solid #fcc; border-radius: 8px; color: #c33;">\n        <h3>Error loading products</h3>\n        <p>${e.message}</p>\n        <button onclick="window.location.reload()" style="margin-top: 1rem; padding: 0.5rem 1rem; background: #c33; color: white; border: none; border-radius: 4px; cursor: pointer;">\n          Reload Page\n        </button>\n      </div>\n    `}destroy(){this.infiniteScroll&&this.infiniteScroll.destroy(),this.interactions&&this.interactions.destroy();const e=document.querySelector(".page-wrapper");e&&e.querySelectorAll(".filter-drawer").forEach(e=>e.remove()),window.__pendingScrollRestoration=null,this.cache.save(this.state),u("collections",null)}}function E(){if(!window.gsap)return Promise.resolve();const e=gsap.timeline(),t=document.querySelector(".footer-section");t&&e.to(t,{opacity:0,duration:.65,ease:"power2.inOut"},0),[{selector:"#applications",start:0},{selector:"#thickness",start:.025},{selector:"#material",start:.05},{selector:".variant-finishes",start:.075},{selector:".variant-sizes",start:.1},{selector:".variant-buttons",start:.125}].forEach(({selector:t,start:i})=>{const o=document.querySelector(t);o&&e.to(o,{opacity:0,yPercent:20,duration:.35,ease:"power2.in"},i)});const i=document.querySelector(".product-description");if(i&&window.SplitText){const t=new SplitText(i,{type:"lines"});t.lines.forEach(e=>{if(!e.parentNode.style.overflow){const t=document.createElement("div");t.style.overflow="hidden",e.parentNode.insertBefore(t,e),t.appendChild(e)}}),e.to(t.lines,{yPercent:100,duration:.35,ease:"power2.in",stagger:.025/t.lines.length},.15)}const o=document.querySelector("#product-title");if(o&&window.SplitText){const t=new SplitText(o,{type:"chars"});e.to(t.chars,{opacity:0,yPercent:20,duration:.35,ease:"power2.in",stagger:.05/t.chars.length},.175)}const r=document.querySelector(".hero-cover");return r&&e.to(r,{width:"100%",duration:.45,ease:"expo.inOut"},.2),e}function I(e,t,i){const o=new FormData(e),r={};o.forEach((e,t)=>{r[t]=e}),i&&(r.recaptcha_token=i),fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)}).then(async t=>{const i=await t.json();200===t.status?(console.log("✅ Form submitted successfully:",i.message),e.reset()):console.error("❌ Form submission failed:",i.error)}).catch(e=>{console.error("❌ Form submission error:",e)})}function C(){if(void 0===window.taxi)return console.error("Taxi.js not found! Make sure CDN scripts are loaded."),null;const e=n(),t=function(){const e=n();return class extends e{initialLoad(){m(),this.onEnter(),this.onEnterCompleted()}async onEnter(){await m(),requestAnimationFrame(()=>{const e=h("home");e?.setupScrollAnimations&&e.setupScrollAnimations()})}}}(),o=function(){const e=n();return class extends e{constructor(e){super(e),this.pageInstance=null}initialLoad(){this.onEnter(),this.onEnterCompleted()}async onEnter(){const e="popstate"===window.__taxiNavigationTrigger;this.pageInstance=await async function(e=!1){const t=document.querySelector('[data-taxi-view="collections"]');t&&(t.style.opacity="1",window.gsap&&window.gsap.set(t,{opacity:1,force3D:!1})),document.fonts&&document.fonts.ready&&await document.fonts.ready,p();const i=new x;return await i.init(e),i}(e)}onLeave(){const e=document.querySelector(".filter-drawer");if(e&&window.gsap){const t=window.getComputedStyle(e).opacity;parseFloat(t)>0&&window.gsap.to(e,{opacity:0,duration:.15,ease:"power2.out",onComplete:()=>{window.gsap.set(e,{display:"none"})}})}}onLeaveCompleted(){this.pageInstance&&"function"==typeof this.pageInstance.destroy&&(this.pageInstance.destroy(),this.pageInstance=null)}}}(),a=function(){const e=n();return class extends e{initialLoad(){this.onEnter(),this.onEnterCompleted()}async onEnter(){await async function(){document.fonts&&document.fonts.ready&&await document.fonts.ready,p(),await l("https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.0/dist/carousel/carousel.css"),await l("https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.0/dist/fancybox/fancybox.css"),window.Carousel||await c("https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.0/dist/carousel/carousel.umd.js"),window.Fancybox||await c("https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.0/dist/fancybox/fancybox.umd.js"),window.Arrows||await c("https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.0/dist/carousel/carousel.arrows.umd.js"),window.Dots||await c("https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.0/dist/carousel/carousel.dots.umd.js"),window.Thumbs||await c("https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.0/dist/carousel/carousel.thumbs.umd.js");let e=0;for(;(!window.Arrows||!window.Thumbs)&&e<10;)await new Promise(e=>setTimeout(e,50)),e++;const t=document.getElementById("product-carousel"),i=document.querySelector(".product-image"),o=document.querySelector("[data-product-name]");if(!t||!i||!o)return void u("product",{playExitAnimation:()=>E(),destroy:()=>{}});u("product",{playExitAnimation:()=>E(),destroy:()=>{}}),function(){const e=document.querySelector('[data-taxi-view="product"]');if(e&&(window.gsap?gsap.set(e,{opacity:1}):e.style.opacity="1"),!window.gsap)return Promise.resolve();const t=gsap.timeline(),i=document.querySelector(".hero-cover");i&&(gsap.set(i,{width:"100%"}),t.to(i,{width:"0%",duration:.85,ease:"expo.inOut"},0));const o=document.querySelector("#product-title");if(o&&window.SplitText){const e=new SplitText(o,{type:"words,chars"});gsap.set(e.chars,{opacity:0,yPercent:20}),t.to(e.chars,{opacity:1,yPercent:0,duration:.85,ease:"expo.out",stagger:.17/e.chars.length},.17)}const r=document.querySelector(".product-description");if(r&&window.SplitText){const e=new SplitText(r,{type:"lines",linesClass:"split-line"});e.lines.forEach(e=>{const t=document.createElement("div");t.style.overflow="hidden",e.parentNode.insertBefore(t,e),t.appendChild(e)}),gsap.set(e.lines,{yPercent:100}),t.to(e.lines,{yPercent:0,duration:.85,ease:"expo.out",stagger:.085/e.lines.length},.3)}[{selector:".variant-buttons",start:.45},{selector:".variant-sizes",start:.51},{selector:".variant-finishes",start:.59},{selector:"#material",start:.66},{selector:"#thickness",start:.73},{selector:"#applications",start:.8}].forEach(({selector:e,start:i})=>{const o=document.querySelector(e);o&&(gsap.set(o,{opacity:0,yPercent:20}),t.to(o,{opacity:1,yPercent:0,duration:.7,ease:"expo.out"},i))});const s=document.querySelector(".footer-section");s&&(gsap.set(s,{opacity:0}),t.to(s,{opacity:1,duration:.6,ease:"power2.inOut"},.5))}();const r=new class{constructor(){this.slides=[],this.variants=[],this.selectedVariant=null,this.carousel=null,this.fancybox=null,this.initialSlideIndex=0,this.isInitialLoad=!0,this._ac=new AbortController,this.init()}init(){this.extractProductData(),this.determineInitialSlide(),this.buildCarousel(),this.buildVariantButtons(),this.setupFancybox();const e=document.querySelector(".variant-info");e&&(e.style.display="none"),this.handleInitialVariant()}extractProductData(){const e=document.querySelector(".product-image"),t=document.querySelector("[data-product-name]").textContent;this.slides=[{type:"main",src:e.src,alt:`${t} - Main Image`,variantSlug:null,w:1200,h:800}],this.variants=[],document.querySelectorAll(".variants-list .w-dyn-item").forEach(e=>{const i=e.children[0],o=e.querySelector("img"),r=e.querySelector(".product-variant-meta"),s={name:i.textContent,slug:r.dataset.variantSlug,image:o.src,sizes:r.dataset.sizes.split(",").map(e=>e.trim()),finishes:r.dataset.finishes.split(",").map(e=>e.trim())};this.variants.push(s),this.slides.push({type:"variant",src:s.image,alt:`${t} - ${s.name}`,variantSlug:s.slug,w:1200,h:800})})}determineInitialSlide(){const e=new URLSearchParams(window.location.search).get("variant");if(this.initialSlideIndex=0,e&&this.variants.some(t=>t.slug===e)){const t=this.slides.findIndex(t=>t.variantSlug===e);if(-1!==t)return this.initialSlideIndex=t,void(this.selectedVariant=e)}this.variants.length>0?this.selectedVariant=this.variants[0].slug:this.selectedVariant=null}buildCarousel(){const e=document.getElementById("product-carousel");if(e){e.innerHTML="",this.slides.forEach(t=>{const i=document.createElement("div");i.className="f-carousel__slide";const o=document.createElement("img");o.src=t.src,o.alt=t.alt,o.dataset.fancybox="gallery",o.dataset.src=t.src,o.dataset.caption=t.alt,o.className="carousel-image",o.style.cursor="pointer",i.appendChild(o),e.appendChild(i)});try{const t={};void 0!==window.Arrows&&(t.Arrows=window.Arrows),void 0!==window.Thumbs&&(t.Thumbs=window.Thumbs),this.carousel=Carousel(e,{infinite:!0,center:!0,fill:!0,dragFree:!1,initialPage:this.initialSlideIndex},t).init()}catch(e){console.error("Failed to initialize Carousel:",e)}}}setupFancybox(){Fancybox.bind('[data-fancybox="gallery"]',{Carousel:{Toolbar:{display:{right:["zoomIn","zoomOut","thumbs","close"]}}}})}buildVariantButtons(){const e=document.querySelector(".variant-buttons");e&&(e.innerHTML="",this.variants.forEach(t=>{const i=document.createElement("button");i.className="variant-btn",i.dataset.variantSlug=t.slug,i.innerHTML=`\n          <img src="${t.image}" alt="${t.name}" class="variant-btn-image">\n          <span>${this.slugToName(t.name)}</span>\n        `,i.addEventListener("click",()=>{this.isInitialLoad=!1,this.selectVariant(t.slug,!0)},{signal:this._ac.signal}),e.appendChild(i)}))}handleInitialVariant(){this.selectedVariant&&(new URLSearchParams(window.location.search).get("variant")===this.selectedVariant?this.selectVariant(this.selectedVariant,!0,!1):this.selectVariant(this.selectedVariant,!1,!1)),setTimeout(()=>{this.isInitialLoad=!1},100)}selectVariant(e,t=!0,i=!0){if(this.selectedVariant=e,document.querySelectorAll(".variant-btn").forEach(t=>{t.classList.toggle("selected",t.dataset.variantSlug===e)}),t&&this.carousel){const t=this.slides.findIndex(t=>t.variantSlug===e);if(-1!==t)try{"function"==typeof this.carousel.slideTo?this.carousel.slideTo(t):"function"==typeof this.carousel.goTo?this.carousel.goTo(t):this.carousel.page=t}catch(e){console.error("Error navigating to slide:",e)}}this.displayVariantInfo(e),i&&this.updateURLParams()}displayVariantInfo(e){const t=document.querySelector(".variant-info");if(!e)return void(t&&(t.style.display="none"));const i=this.variants.find(t=>t.slug===e);if(!i)return void(t&&(t.style.display="none"));const o=document.querySelector(".variant-name"),r=document.querySelector(".sizes-list"),s=document.querySelector(".finishes-list");t&&o&&r&&s&&(o.textContent=this.slugToName(i.name),r.innerHTML="",s.innerHTML="",i.sizes.forEach(e=>{const t=document.createElement("div");t.className="size-item",t.textContent=this.slugToName(e),r.appendChild(t)}),i.finishes.forEach(e=>{const t=document.createElement("div");t.className="finish-item",t.textContent=this.slugToName(e),s.appendChild(t)}),t.style.display="block")}slugToName(e){return e.split(/[-_\s]+/).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}updateURLParams(){const e=new URL(window.location);this.selectedVariant?e.searchParams.set("variant",this.selectedVariant):e.searchParams.delete("variant"),window.history.replaceState(null,"",e)}destroy(){try{this._ac?.abort?.()}catch(e){}try{this.carousel?.destroy?.()}catch(e){}try{window.Fancybox&&Fancybox.destroy&&Fancybox.destroy()}catch(e){}}};u("product",{playExitAnimation:()=>E(),destroy:()=>r.destroy()})}()}}}(),d=function(){const e=n();return class extends e{initialLoad(){this.onEnter(),this.onEnterCompleted()}async onEnter(){await async function(){document.fonts&&document.fonts.ready&&await document.fonts.ready,p(),u("about",{playExitAnimation:()=>function(){if(!window.gsap)return Promise.resolve();const e=window.gsap.timeline(),t=document.querySelector(".footer-section");return t&&e.to(t,{opacity:0,duration:.6,ease:"power2.inOut"},0),e}()}),function(){const e=document.querySelector('[data-taxi-view="about"]');if(e&&(window.gsap?window.gsap.set(e,{opacity:1}):e.style.opacity="1"),window.gsap){const e=document.querySelector(".footer-section");e&&(window.gsap.set(e,{opacity:0}),window.gsap.to(e,{opacity:1,duration:.6,ease:"power2.inOut",delay:.2}))}}()}()}}}(),g=function(){const e=n();return class extends e{initialLoad(){this.onEnter(),this.onEnterCompleted()}async onEnter(){await async function(){document.fonts&&document.fonts.ready&&await document.fonts.ready,p();const e=function(){const e=document.querySelectorAll(".form-ajax"),t=[];return e.forEach(e=>{const i=function(t){t.preventDefault();const i=e.getAttribute("action"),o=e.getAttribute("data-recaptcha-site-key");o&&window.grecaptcha?grecaptcha.ready(function(){grecaptcha.execute(o,{action:"submit"}).then(function(t){I(e,i,t)})}):I(e,i,null)};e.addEventListener("submit",i),t.push({form:e,handler:i})}),()=>{t.forEach(({form:e,handler:t})=>{e.removeEventListener("submit",t)})}}();u("contact",{playExitAnimation:()=>function(){if(!window.gsap)return Promise.resolve();const e=window.gsap.timeline(),t=document.querySelector(".footer-section");return t&&e.to(t,{opacity:0,duration:.6,ease:"power2.inOut"},0),e}(),destroy:e}),function(){const e=document.querySelector('[data-taxi-view="contact"]');if(e&&(window.gsap?window.gsap.set(e,{opacity:1}):e.style.opacity="1"),window.gsap){const e=document.querySelector(".footer-section");e&&(window.gsap.set(e,{opacity:0}),window.gsap.to(e,{opacity:1,duration:.6,ease:"power2.inOut",delay:.2}))}}()}()}onLeaveCompleted(){const e=h("contact");e?.destroy&&e.destroy()}}}(),y=window.taxi?class extends window.taxi.Transition{onLeave({from:e,done:t}){if(!window.gsap)return void t();const i=e.getAttribute("data-taxi-view");let o=null;if("home"===i){const e=h("home");o=e?.playExitAnimation?.()}else if("collections"===i){const e=h("collections");o=e?.playExitAnimation?.()}else if("product"===i){const e=h("product");o=e?.playExitAnimation?.()}o?o.eventCallback("onComplete",()=>{gsap.to(e,{opacity:0,duration:.15,ease:"power2.out",onComplete:t})}):gsap.to(e,{opacity:0,duration:.2,ease:"power2.out",onComplete:t})}onEnter({to:e,trigger:t,done:i}){window.gsap?(window.scrollTo(0,0),"collections"!==e.getAttribute("data-taxi-view")&&gsap.set(e,{opacity:0}),i()):i()}}:(console.error("taxi not loaded!"),class{}),w=new window.taxi.Core({links:'a:not([target]):not([href^="#"]):not([data-taxi-ignore])',removeOldContent:!0,allowInterruption:!1,enablePrefetch:!0,transitions:{default:y},renderers:{default:e,home:t,collections:o,product:a,about:d,contact:g}});return s(),r(),"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.__taxiNavigationTrigger=null,w.on("NAVIGATE_IN",({trigger:e})=>{window.__taxiNavigationTrigger=e}),w.on("NAVIGATE_OUT",({from:e})=>{i(!0),window.lenis&&window.lenis.stop()}),w.on("NAVIGATE_END",({to:e})=>{if(r(window.location.pathname),(()=>{if(window.Webflow&&window.Webflow.require)try{window.Webflow.destroy(),window.Webflow.ready(),window.Webflow.require("ix2").init()}catch(e){}})(),window.lenis&&window.lenis.start(),window.__pendingScrollRestoration){const e=window.__pendingScrollRestoration;window.__pendingScrollRestoration=null,setTimeout(()=>{if(window.lenis){window.lenis.resize();const t=document.querySelector(`[data-product-id="${e}"]`);t&&window.lenis.scrollTo(t,{duration:.6,offset:-100,easing:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2})}},200)}}),w.on("NAVIGATE_ERROR",e=>{console.error("Navigation error:",e)}),w}function P(){C()||console.error("Taxi.js failed to initialize")}console.log("Versatile Site v4.7.7"),console.log("Site by nechemya.dev"),console.log("https://nechemya.dev"),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",P):P()}();
